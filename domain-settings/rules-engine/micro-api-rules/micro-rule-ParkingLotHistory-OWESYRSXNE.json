{"type":15,"data":{"domainKey":"OWESYRSXNE","name":"ParkingLotHistory","desc":null,"code":"\r\nimport io.boodskap.iot.MicroApi;\r\nimport groovy.json.JsonSlurper;\r\n      \r\n//ParkingLot History List API\r\n@MicroApi(\r\n          desc = \"ParkingLot History List API Service\",\r\n          params = [\"query\"],\r\n          types = [\"string\"], // if declared, make sure it matches the params[]\r\n          required = [],\r\n          roles = [], // domain roles, empty roles for open access\r\n          slug = \"\" // optional short name for REST API access\r\n)\r\ndef list(def args) {\r\n\r\n    def response = [reqStatus:false];\r\n    \r\n    def jsonSlurper = new JsonSlurper();\r\n    \r\n    try{\r\n        def inputObj = jsonSlurper.parseText(args.query);\r\n        def result = record.search(2002, args.query);\r\n            response['reqStatus'] = true;\r\n            response['result'] = result;\r\n        \r\n    }catch(Exception ex){\r\n        failure.insert(\"Exception occured => %s\",ex.toString());\r\n        response['error'] = ex;\r\n    }finally{\r\n         return response;\r\n    }\r\n}\r\n      \r\n//ParkingLot History Insert API\r\n@MicroApi(\r\n          desc = \"ParkingLot History Create API Service\",\r\n          params = [\"req_data\"],\r\n          types = [\"string\"], // if declared, make sure it matches the params[]\r\n          required = [],\r\n          roles = [], // domain roles, empty roles for open access\r\n          slug = \"\" // optional short name for REST API access\r\n)\r\ndef insert(def args) {\r\n\r\n    def response = [reqStatus:false];\r\n    \r\n    def jsonSlurper = new JsonSlurper();\r\n    \r\n    try{\r\n        def inputObj = jsonSlurper.parseText(args.req_data);\r\n        def Id = util.uuid().toString();\r\n        def result = record.insert(2002, Id, inputObj);\r\n    \r\n        response['result'] = \"ParkingLot History created successfully!\";\r\n        response['reqStatus'] = true;\r\n        \r\n    }catch(Exception ex){\r\n        failure.insert(\"Exception occured => %s\",ex.toString());\r\n        response['error'] = ex;\r\n    }finally{\r\n         return response;\r\n    }\r\n}\r\n\r\n\r\n      \r\n//ParkingLot History Delete API\r\n@MicroApi(\r\n          desc = \"ParkingLot History Delete API Service\",\r\n          params = [\"id\"],\r\n          types = [\"string\"], // if declared, make sure it matches the params[]\r\n          required = [],\r\n          roles = [], // domain roles, empty roles for open access\r\n          slug = \"\" // optional short name for REST API access\r\n)\r\ndef delete(def args) {\r\n\r\n    def response = [reqStatus:false];\r\n    \r\n    def jsonSlurper = new JsonSlurper();\r\n    \r\n    try{\r\n        def Id = args.id;\r\n        if(Id != \"\"){\r\n            \r\n           def inputCheck = record.get(2002, Id);\r\n            \r\n            if(inputCheck != null){\r\n                record.delete(2002, Id);\r\n                response['result'] = \"ParkingLot History deleted successfully!\";\r\n                response['reqStatus'] = true;\r\n            }else{\r\n                response['message'] = \"ParkingLot History not found !\";\r\n                response['reqStatus'] = false;\r\n            }\r\n        }else{\r\n                response['message'] = \"ParkingLot History ID missing\";\r\n                response['reqStatus'] = false;\r\n        }\r\n    }catch(Exception ex){\r\n        failure.insert(\"Exception occured => %s\",ex.toString());\r\n        response['error'] = ex;\r\n    }finally{\r\n         return response;\r\n    }\r\n}","authType":"TOKEN","apiKey":null,"props":null,"createdStamp":1670961993722,"updatedStamp":1670962280899,"createdBy":"bob@kstechnologies.com","updatedBy":"bob@kstechnologies.com","allowedMethods":null,"methods":[{"name":"list","desc":"ParkingLot History List API Service","slug":"list","params":[{"name":"query","type":"string","required":true}],"roles":[]},{"name":"delete","desc":"ParkingLot History Delete API Service","slug":"delete","params":[{"name":"id","type":"string","required":true}],"roles":[]},{"name":"insert","desc":"ParkingLot History Create API Service","slug":"insert","params":[{"name":"req_data","type":"string","required":true}],"roles":[]}]}}